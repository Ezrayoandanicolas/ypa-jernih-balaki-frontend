{"ast":null,"code":"import axios from '@/config/axios.js';\n// import router from '@/router'\n// import { VueCookieNext } from 'vue-cookie-next'\n\nconst auth = {\n  state: {\n    authenticated: false,\n    user: null,\n    token: null\n  },\n  getters: {\n    isAuthenticated(state) {\n      return state.authenticated;\n    },\n    user(state) {\n      return state.user;\n    },\n    userToken(state) {\n      return state.token;\n    }\n  },\n  mutations: {\n    authenticateUser(state, data) {\n      state.authenticated = true;\n      state.token = data.token;\n      state.user = data.user;\n    },\n    setAuth(state, data) {\n      state.authenticated = true;\n      state.user = data;\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, data) {\n      return new Promise((resolve, reject) => {\n        axios.post('login', data).then(response => {\n          // console.log(response)\n          commit('authenticateUser', response);\n          localStorage.setItem(\"access_token\", response.data.token);\n          localStorage.setItem(\"access\", true);\n          // console.log(response)\n          resolve(response);\n        }).catch(error => {\n          console.log(error);\n          reject(error);\n        });\n      });\n    },\n    checkAuth({\n      commit\n    }) {\n      return new Promise((resolve, reject) => {\n        axios.get('user').then(res => {\n          // console.log(res.data)\n          commit('setAuth', res.data);\n          resolve(res);\n        }).catch(err => {\n          localStorage.removeItem(\"access_token\");\n          localStorage.removeItem(\"access\");\n          reject(err);\n        });\n      });\n    },\n    logout() {\n      return new Promise((resolve, reject) => {\n        axios.post('logout').then(res => {\n          localStorage.removeItem(\"access_token\");\n          localStorage.removeItem(\"access\");\n          resolve(res);\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    }\n  }\n};\nexport default auth;","map":{"version":3,"names":["axios","auth","state","authenticated","user","token","getters","isAuthenticated","userToken","mutations","authenticateUser","data","setAuth","actions","login","commit","Promise","resolve","reject","post","then","response","localStorage","setItem","catch","error","console","log","checkAuth","get","res","err","removeItem","logout"],"sources":["C:/xampp/htdocs/ypa-frontend/src/config/store/auth.js"],"sourcesContent":["import axios from '@/config/axios.js'\r\n// import router from '@/router'\r\n// import { VueCookieNext } from 'vue-cookie-next'\r\n\r\nconst auth = {\r\n    state: {\r\n        authenticated: false,\r\n        user: null,\r\n        token: null,\r\n    },\r\n    getters: {\r\n        isAuthenticated(state) {\r\n            return state.authenticated\r\n        },\r\n        user(state) {\r\n            return state.user\r\n        },\r\n        userToken(state) {\r\n            return state.token\r\n        }\r\n    },\r\n    mutations: {\r\n        authenticateUser(state, data) {\r\n            state.authenticated = true\r\n            state.token = data.token\r\n            state.user = data.user\r\n        },\r\n        setAuth(state, data) {\r\n            state.authenticated = true\r\n            state.user = data\r\n        }\r\n    },\r\n    actions: {\r\n        login({commit}, data) {\r\n            return new Promise((resolve, reject) => {\r\n              axios.post('login', data).then(response => {\r\n                // console.log(response)\r\n                commit('authenticateUser', response)\r\n                localStorage.setItem(\"access_token\", response.data.token)\r\n                localStorage.setItem(\"access\", true)\r\n                // console.log(response)\r\n                resolve(response)\r\n              }).catch(error => {\r\n                console.log(error)\r\n                reject(error)\r\n              })\r\n            });\r\n        },\r\n        checkAuth({commit}) {  \r\n            return new Promise((resolve, reject) => {\r\n                axios.get('user').then((res) => {\r\n                    // console.log(res.data)\r\n                    commit('setAuth', res.data)\r\n                    resolve(res)\r\n                }).catch((err) => {\r\n                    localStorage.removeItem(\"access_token\")\r\n                    localStorage.removeItem(\"access\")\r\n                    reject(err)\r\n                })\r\n            })            \r\n        },\r\n        logout() {\r\n            return new Promise((resolve, reject) => {\r\n                axios.post('logout').then((res) => {\r\n                    localStorage.removeItem(\"access_token\")\r\n                    localStorage.removeItem(\"access\")\r\n                    resolve(res)\r\n                }).catch((err) => {\r\n                    reject(err)\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport default auth"],"mappings":"AAAA,OAAOA,KAAK,MAAM,mBAAmB;AACrC;AACA;;AAEA,MAAMC,IAAI,GAAG;EACTC,KAAK,EAAE;IACHC,aAAa,EAAE,KAAK;IACpBC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE;EACX,CAAC;EACDC,OAAO,EAAE;IACLC,eAAeA,CAACL,KAAK,EAAE;MACnB,OAAOA,KAAK,CAACC,aAAa;IAC9B,CAAC;IACDC,IAAIA,CAACF,KAAK,EAAE;MACR,OAAOA,KAAK,CAACE,IAAI;IACrB,CAAC;IACDI,SAASA,CAACN,KAAK,EAAE;MACb,OAAOA,KAAK,CAACG,KAAK;IACtB;EACJ,CAAC;EACDI,SAAS,EAAE;IACPC,gBAAgBA,CAACR,KAAK,EAAES,IAAI,EAAE;MAC1BT,KAAK,CAACC,aAAa,GAAG,IAAI;MAC1BD,KAAK,CAACG,KAAK,GAAGM,IAAI,CAACN,KAAK;MACxBH,KAAK,CAACE,IAAI,GAAGO,IAAI,CAACP,IAAI;IAC1B,CAAC;IACDQ,OAAOA,CAACV,KAAK,EAAES,IAAI,EAAE;MACjBT,KAAK,CAACC,aAAa,GAAG,IAAI;MAC1BD,KAAK,CAACE,IAAI,GAAGO,IAAI;IACrB;EACJ,CAAC;EACDE,OAAO,EAAE;IACLC,KAAKA,CAAC;MAACC;IAAM,CAAC,EAAEJ,IAAI,EAAE;MAClB,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtClB,KAAK,CAACmB,IAAI,CAAC,OAAO,EAAER,IAAI,CAAC,CAACS,IAAI,CAACC,QAAQ,IAAI;UACzC;UACAN,MAAM,CAAC,kBAAkB,EAAEM,QAAQ,CAAC;UACpCC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,QAAQ,CAACV,IAAI,CAACN,KAAK,CAAC;UACzDiB,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC;UACpC;UACAN,OAAO,CAACI,QAAQ,CAAC;QACnB,CAAC,CAAC,CAACG,KAAK,CAACC,KAAK,IAAI;UAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClBP,MAAM,CAACO,KAAK,CAAC;QACf,CAAC,CAAC;MACJ,CAAC,CAAC;IACN,CAAC;IACDG,SAASA,CAAC;MAACb;IAAM,CAAC,EAAE;MAChB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACpClB,KAAK,CAAC6B,GAAG,CAAC,MAAM,CAAC,CAACT,IAAI,CAAEU,GAAG,IAAK;UAC5B;UACAf,MAAM,CAAC,SAAS,EAAEe,GAAG,CAACnB,IAAI,CAAC;UAC3BM,OAAO,CAACa,GAAG,CAAC;QAChB,CAAC,CAAC,CAACN,KAAK,CAAEO,GAAG,IAAK;UACdT,YAAY,CAACU,UAAU,CAAC,cAAc,CAAC;UACvCV,YAAY,CAACU,UAAU,CAAC,QAAQ,CAAC;UACjCd,MAAM,CAACa,GAAG,CAAC;QACf,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACDE,MAAMA,CAAA,EAAG;MACL,OAAO,IAAIjB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACpClB,KAAK,CAACmB,IAAI,CAAC,QAAQ,CAAC,CAACC,IAAI,CAAEU,GAAG,IAAK;UAC/BR,YAAY,CAACU,UAAU,CAAC,cAAc,CAAC;UACvCV,YAAY,CAACU,UAAU,CAAC,QAAQ,CAAC;UACjCf,OAAO,CAACa,GAAG,CAAC;QAChB,CAAC,CAAC,CAACN,KAAK,CAAEO,GAAG,IAAK;UACdb,MAAM,CAACa,GAAG,CAAC;QACf,CAAC,CAAC;MACN,CAAC,CAAC;IACN;EACJ;AACJ,CAAC;AAED,eAAe9B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}